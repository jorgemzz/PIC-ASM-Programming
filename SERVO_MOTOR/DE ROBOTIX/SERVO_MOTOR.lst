MPASM  5.33                   SERVO_MOTOR.ASM   12-8-2009  12:46:23         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;****************************************************************************
                      00002 ; PROGRAMA : ServoCrt.ASM       Autor:ionitron          Fecha: 25/10/2001
                      00003 ; Funcion : Prueba de control de servo FUTABA S3003 conectado en RB0, el servo 
                      00004 ; se movera a dos posiciones (0º-180º) dependiendo del estado del interruptor 
                      00005 ; colocado en RA0.
                      00006 ;             
                      00007 ; Revision : 1.0                        Programa para : PIC16F84
                      00008 ; Velocidad del reloj : 4 MHz           Reloj instrucci¢n: 1 MHz = 1 us
                      00009 ; Perro Guardian : Deshabilitado        Tipo de reloj : XT  
                      00010 ; Proteccion del codigo : OFF
                      00011 ;             
                      00012 ;****************************** Igualdades **********************************
                      00013 ;             
                      00014                 
                      00015                 LIST   P=PIC16F84
                      00016 
  00000000            00017 w       EQU     0       ;Destino W
  00000001            00018 f       EQU     1       ;Destino registro
  00000005            00019 RA      EQU     05h     ;Puerta A
  00000006            00020 RB      EQU     06h     ;Puerta B
  00000005            00021 PORTA   EQU     05h     ;Puerta A
  00000006            00022 PORTB   EQU     06h     ;Puerta B
  00000005            00023 TRISA   EQU     5h      ;Registro triestado de Puerta A
  00000006            00024 TRISB   EQU     6h      ;Registro triestado de Puerta B
  00000003            00025 STATUS  EQU     03h     ;Registro STATUS
  00000001            00026 OPCION  EQU     1h      ;Registro OPCION
  00000007            00027 RBPU    EQU     7h      ;Bit R de polarizaci¢n
  00000005            00028 RP0     EQU     05h     ;Bit 5 registro STATUS
  0000000C            00029 PDel0   EQU     0Ch
  0000000D            00030 PDel1   EQU     0Dh
                      00031 
                      00032 ;                                     
                      00033 ;************************* Seccion Codigo de RESET **************************
                      00034 ;                                     
0000                  00035                 ORG     00h             ;Direccion del Vector de RESET
0000   2805           00036                 GOTO    Inicializa      ;Comienza el programa
0005                  00037                 ORG     05h             ;Una posicion detras del Vector Interrupcion
                      00038 ;                                     
                      00039 ;**************************** Seccion Inicializa ****************************
                      00040 ;                                     
                      00041                                       
0005   1683           00042 Inicializa      BSF     STATUS,5        ;Seleccion Banco 1
0006   3000           00043                 MOVLW   b'00000000'     ;Carga W
0007   0086           00044                 MOVWF   TRISB           ;Bit0 Puerta B salida
0008   3001           00045                 MOVLW   b'00000001'     ;Carga W
0009   0085           00046                 MOVWF   TRISA           ;Bit0 Puerta A entrada
000A   1283           00047                 BCF     STATUS,5        ;Seleccion Banco 1
000B   0186           00048                 CLRF    RB
                      00049 
                      00050 
000C   1805           00051 LeerEntrada     BTFSC   RA,0            ;Comprueba estado interruptor en RA0
000D   2810           00052                 GOTO    Servo_pos_1     ;Si ra0 = 0 salta y pone el servo en pos. 2
000E   2823           00053                 GOTO    Servo_pos_2     ;Si ra0 = 1 no salta y pone el servo en pos. 1
MPASM  5.33                   SERVO_MOTOR.ASM   12-8-2009  12:46:23         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000F   280C           00054                 GOTO    LeerEntrada     ; Bucle infinito
                      00055 
                      00056 
                      00057 ;************* Pulso de 0,65 ms para poner el servo en 45º ********************
                      00058 
0010   1406           00059 Servo_pos_1     BSF     RB,0            ;Pone a 1 la salida Rb0
                      00060 
                      00061 ;------------------Bucle retardo duracion pulso a 1--------------
                      00062 ;-------------------------------------------------------------
                      00063 ; Code generated by PDEL  ver 1.0  on 08/12/2009 at 11:55:26 a.m.
                      00064 ; Description: Waits 650 cycles
                      00065 ;-------------------------------------------------------------
0011   30A1           00066 PDelay  movlw     .161      ; 1 set number of repetitions
0012   008C           00067         movwf     PDel0     ; 1 |
0013   0064           00068 PLoop0  clrwdt              ; 1 clear watchdog
0014   0B8C           00069         decfsz    PDel0, 1  ; 1 + (1) is the time over?
0015   2813           00070         goto      PLoop0    ; 2 no, loop
0016   0064           00071         clrwdt              ; 1 cycle delay
                      00072         ;return              ; 2+2 Done
                      00073 ;-------------------------------------------------------------
                      00074 
0017   1006           00075                 BCF     RB,0            ;Pone a 0 la salida Rb0
                      00076 
                      00077 ;-------------Bucle retardo duracion resto onda hasta 20 ms--------------
                      00078 ;-------------------------------------------------------------
                      00079 ; Code generated by PDEL  ver 1.0  on 08/12/2009 at 11:57:23 a.m.
                      00080 ; Description: Waits 19350 cycles
                      00081 ;-------------------------------------------------------------
0018   301A           00082 PDelayR  movlw     .26       ; 1 set number of repetitions (B)
0019   008C           00083         movwf     PDel0     ; 1 |
001A   30B9           00084 PLoop1R  movlw     .185      ; 1 set number of repetitions (A)
001B   008D           00085         movwf     PDel1     ; 1 |
001C   0064           00086 PLoop2R  clrwdt              ; 1 clear watchdog
001D   0B8D           00087         decfsz    PDel1, 1  ; 1 + (1) is the time over? (A)
001E   281C           00088         goto      PLoop2R    ; 2 no, loop
001F   0B8C           00089         decfsz    PDel0,  1 ; 1 + (1) is the time over? (B)
0020   281A           00090         goto      PLoop1R    ; 2 no, loop
0021   0064           00091         clrwdt              ; 1 cycle delay
                      00092         ;return              ; 2+2 Done
                      00093 ;-------------------------------------------------------------
                      00094 
0022   280C           00095                 GOTO    LeerEntrada   
                      00096 
                      00097 ;************* Pulso de 1.45 ms para poner el servo en 135º ********************
                      00098 
0023   1406           00099 Servo_pos_2     BSF     RB,0            ;Pone a 1 la salida Rb0
                      00100 
                      00101 ;------------------Bucle retardo duracion pulso a 1--------------
                      00102 ;-------------------------------------------------------------
                      00103 ; Code generated by PDEL  ver 1.0  on 08/12/2009 at 12:44:48 p.m.
                      00104 ; Description: Waits 1450 cycles
                      00105 ;-------------------------------------------------------------
0024   30F0           00106 PDelayM  movlw     .240      ; 1 set number of repetitions
MPASM  5.33                   SERVO_MOTOR.ASM   12-8-2009  12:46:23         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0025   008C           00107         movwf     PDel0     ; 1 |
0026   0064           00108 PLoop0M  clrwdt              ; 1 clear watchdog
0027   2828           00109 PDelL1M  goto PDelL2M        ; 2 cycles delay
0028                  00110 PDelL2M  
0028   0B8C           00111         decfsz    PDel0, 1  ; 1 + (1) is the time over?
0029   2826           00112         goto      PLoop0M    ; 2 no, loop
002A   282B           00113 PDelL3M  goto PDelL4M         ; 2 cycles delay
002B   282C           00114 PDelL4M  goto PDelL5M         ; 2 cycles delay
002C   0064           00115 PDelL5M  clrwdt              ; 1 cycle delay
                      00116         ;return              ; 2+2 Done
                      00117 ;-------------------------------------------------------------
                      00118 
002D   1006           00119                 BCF     RB,0            ;Pone a 0 la salida Rb0
                      00120 
                      00121 ;-------------Bucle retardo duracion resto onda hasta 20 ms--------------
                      00122 ;-------------------------------------------------------------
                      00123 ; Code generated by PDEL  ver 1.0  on 08/12/2009 at 12:45:52 p.m.
                      00124 ; Description: Waits 18550 cycles
                      00125 ;-------------------------------------------------------------
002E   3013           00126 PDelayS  movlw     .19       ; 1 set number of repetitions (B)
002F   008C           00127         movwf     PDel0     ; 1 |
0030   30F3           00128 PLoop1S  movlw     .243      ; 1 set number of repetitions (A)
0031   008D           00129         movwf     PDel1     ; 1 |
0032   0064           00130 PLoop2S  clrwdt              ; 1 clear watchdog
0033   0B8D           00131         decfsz    PDel1, 1  ; 1 + (1) is the time over? (A)
0034   2832           00132         goto      PLoop2S    ; 2 no, loop
0035   0B8C           00133         decfsz    PDel0,  1 ; 1 + (1) is the time over? (B)
0036   2830           00134         goto      PLoop1S    ; 2 no, loop
0037   0064           00135         clrwdt              ; 1 cycle delay
                      00136         ;return              ; 2+2 Done
                      00137 ;-------------------------------------------------------------
                      00138 
0038   280C           00139                 GOTO    LeerEntrada   
                      00140 
                      00141  
                      00142                 END     
MPASM  5.33                   SERVO_MOTOR.ASM   12-8-2009  12:46:23         PAGE  4


SYMBOL TABLE
  LABEL                             VALUE 

Inicializa                        00000005
LeerEntrada                       0000000C
OPCION                            00000001
PDel0                             0000000C
PDel1                             0000000D
PDelL1M                           00000027
PDelL2M                           00000028
PDelL3M                           0000002A
PDelL4M                           0000002B
PDelL5M                           0000002C
PDelay                            00000011
PDelayM                           00000024
PDelayR                           00000018
PDelayS                           0000002E
PLoop0                            00000013
PLoop0M                           00000026
PLoop1R                           0000001A
PLoop1S                           00000030
PLoop2R                           0000001C
PLoop2S                           00000032
PORTA                             00000005
PORTB                             00000006
RA                                00000005
RB                                00000006
RBPU                              00000007
RP0                               00000005
STATUS                            00000003
Servo_pos_1                       00000010
Servo_pos_2                       00000023
TRISA                             00000005
TRISB                             00000006
__16F84A                          00000001
__DEBUG                           1
f                                 00000001
w                                 00000000


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X----XXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXX-------

All other memory blocks unused.

Program Memory Words Used:    53
Program Memory Words Free:   971


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

