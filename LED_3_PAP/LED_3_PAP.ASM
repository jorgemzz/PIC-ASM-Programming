

	LIST	P=16F84A
	INCLUDE	"P16F84A.INC"

;---------MAPA DE MEMORIA-------

	CBLOCK	0X0C
	
	ROTAR
	;REG1			;UTILIZANDO LA DIRECTIVA CBLOCK ASIGNO 
	;REG2			;LOS NOMBRES A LAS POSICIONES DE MEMORIA
	;REG3			;DE DATOOS PARA REALIZAR LOS RETARDOS
	;REG4
	RETARDO
	PDel0
	PDel1

	ENDC

;-------CONFIGURACION DE PUERTOS---

RESET	ORG	0X00			;INDICA DONDE SE ESCRIBE LA SIGUIENTE INSTRUCCION
		GOTO	INICIO		;SALTA A INICIO
		ORG	0X05
INICIO	BSF		STATUS,RP0	;SALTO AL BANCO 1
		MOVLW	B'00000000'		;CARGA W CON 00000000
		MOVWF	TRISB		;CONFIGURA LOS PINES DE PORT B COMO SALIDA
		BCF		STATUS,RP0	;REGRESA AL BANCO 0
	
;--------------OSCILANDO A VARIAS FRECUENCIAS------------------

FREC_1

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_1		
		MOVLW	.10		;CARGO W CON EL DECIMAL 5
		MOVWF	RETARDO		;LUEGO LO PASO A RETARDO Y LO DECREMENTO

AHORA_1
		DECF	RETARDO,1	;OPERO RETARDO Y 0X00 CON UN XOR ME DARA 0 SI AMBOS SON CEROS
		MOVF	RETARDO,0	;OSEA SI RETARDO LLEGO A CERO; ENTONCES EL BIT Z SE PONE A 
		XORLW	0X00		;1 PARA INDICAR Q EL RESULTADO DE LA ULÑTIMA OPERACION FUE 0 
		BTFSC	STATUS,Z	;SI RETARDO AUN NO LLEGA A 0 SALTA UNA LINEA
CHAU_1	GOTO	FREC_2		;SI LLEGA A CERO NOS VAMOS A FREC_2

		MOVLW	0X01		;CARGA W CON 00000001
		MOVWF	ROTAR		;LO PASA AL REGISTRO ROTAR
		
ROTANDO_1	
		MOVF	ROTAR,0		;PASA EL CONTENIDO DE ROTAR A W
		MOVWF	PORTB		;DE AHI A PORT B

		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO

		RLF		ROTAR,1		;DEZPLAZA EL CONTENIDO DE ROTAR Y LO GUARDA
		BTFSS	ROTAR,3		;PRUEBA SI SE ACTIVA EL 4to BIT  SI ES ASI SALTA 
		GOTO	ROTANDO_1		;SINO SIGUE ROITANDO
		GOTO	AHORA_1		;REPITE TODO DE NUEVO
							;ESTO SIRVE PARA QUE NO SE ACTIVE EL LED 4to 

;-----------------------------------------------------------------

FREC_2

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_2		
		MOVLW	.20		;CARGO W CON EL DECIMAL 100
		MOVWF	RETARDO		;LUEGO LO PASO A RETARDO Y LO DECREMENTO

AHORA_2
		DECF	RETARDO,1	;OPERO RETARDO Y 0X00 CON UN XOR ME DARA 0 SI AMBOS SON CEROS
		MOVF	RETARDO,0	;OSEA SI RETARDO LLEGO A CERO; ENTONCES EL BIT Z SE PONE A 
		XORLW	0X00		;1 PARA INDICAR Q EL RESULTADO DE LA ULÑTIMA OPERACION FUE 0 
		BTFSC	STATUS,Z	;SI RETARDO AUN NO LLEGA A 0 SALTA HASTA AHORA
CHAU_2	GOTO	FREC_3		;SI LLEGA A CERO NOS VAMOS A FREC_1(NUEVAMENTE)

		MOVLW	0X01		;CARGA W CON 00000001
		MOVWF	ROTAR		;LO PASA AL REGISTRO ROTAR
		
ROTANDO_2	
		MOVF	ROTAR,0		;PASA EL CONTENIDO DE ROTAR A W
		MOVWF	PORTB		;DE AHI A PORT B

		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO

		RLF		ROTAR,1		;DEZPLAZA EL CONTENIDO DE ROTAR Y LO GUARDA
		BTFSS	ROTAR,3		;PRUEBA SI SE ACTIVA EL 4to BIT  SI ES ASI SALTA 
		GOTO	ROTANDO_2		;SINO SIGUE ROITANDO
		GOTO	AHORA_2		;REPITE TODO DE NUEVO
							;ESTO SIRVE PARA QUE NO SE ACTIVE EL LED 4to 

;-----------------------------------------------------------------

FREC_3

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_3		
		MOVLW	.30		;CARGO W CON EL DECIMAL 5
		MOVWF	RETARDO		;LUEGO LO PASO A RETARDO Y LO DECREMENTO

AHORA_3
		DECF	RETARDO,1	;OPERO RETARDO Y 0X00 CON UN XOR ME DARA 0 SI AMBOS SON CEROS
		MOVF	RETARDO,0	;OSEA SI RETARDO LLEGO A CERO; ENTONCES EL BIT Z SE PONE A 
		XORLW	0X00		;1 PARA INDICAR Q EL RESULTADO DE LA ULÑTIMA OPERACION FUE 0 
		BTFSC	STATUS,Z	;SI RETARDO AUN NO LLEGA A 0 SALTA UNA LINEA
CHAU_3	GOTO	FREC_4		;SI LLEGA A CERO NOS VAMOS A FREC_2

		MOVLW	0X01		;CARGA W CON 00000001
		MOVWF	ROTAR		;LO PASA AL REGISTRO ROTAR
		
ROTANDO_3	
		MOVF	ROTAR,0		;PASA EL CONTENIDO DE ROTAR A W
		MOVWF	PORTB		;DE AHI A PORT B

		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay	

		RLF		ROTAR,1		;DEZPLAZA EL CONTENIDO DE ROTAR Y LO GUARDA
		BTFSS	ROTAR,3		;PRUEBA SI SE ACTIVA EL 4to BIT  SI ES ASI SALTA 
		GOTO	ROTANDO_3		;SINO SIGUE ROITANDO
		GOTO	AHORA_3		;REPITE TODO DE NUEVO
							;ESTO SIRVE PARA QUE NO SE ACTIVE EL LED 4to 

;-----------------------------------------------------------------

FREC_4

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_4		
		MOVLW	.40		;CARGO W CON EL DECIMAL 100
		MOVWF	RETARDO		;LUEGO LO PASO A RETARDO Y LO DECREMENTO

AHORA_4
		DECF	RETARDO,1	;OPERO RETARDO Y 0X00 CON UN XOR ME DARA 0 SI AMBOS SON CEROS
		MOVF	RETARDO,0	;OSEA SI RETARDO LLEGO A CERO; ENTONCES EL BIT Z SE PONE A 
		XORLW	0X00		;1 PARA INDICAR Q EL RESULTADO DE LA ULÑTIMA OPERACION FUE 0 
		BTFSC	STATUS,Z	;SI RETARDO AUN NO LLEGA A 0 SALTA HASTA AHORA
CHAU_4	GOTO	FREC_5		;SI LLEGA A CERO NOS VAMOS A FREC_1(NUEVAMENTE)

		MOVLW	0X01		;CARGA W CON 00000001
		MOVWF	ROTAR		;LO PASA AL REGISTRO ROTAR
		
ROTANDO_4	
		MOVF	ROTAR,0		;PASA EL CONTENIDO DE ROTAR A W
		MOVWF	PORTB		;DE AHI A PORT B

		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay	

		RLF		ROTAR,1		;DEZPLAZA EL CONTENIDO DE ROTAR Y LO GUARDA
		BTFSS	ROTAR,3		;PRUEBA SI SE ACTIVA EL 4to BIT  SI ES ASI SALTA 
		GOTO	ROTANDO_4		;SINO SIGUE ROITANDO
		GOTO	AHORA_4		;REPITE TODO DE NUEVO
							;ESTO SIRVE PARA QUE NO SE ACTIVE EL LED 4to

;-----------------------------------------------------------------
 
FREC_5

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_5
		MOVLW	.50
		MOVWF	RETARDO

AHORA_5
		DECF	RETARDO,1
		MOVF	RETARDO,0
		XORLW	0X00
		BTFSC	STATUS,Z
CHAU_5	GOTO	FREC_6

		MOVLW	0X01
		MOVWF	ROTAR

ROTANDO_5
		MOVF	ROTAR,0
		MOVWF	PORTB

		CALL    PDelay
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay	
		CALL    PDelay		

		RLF		ROTAR,1
		BTFSS	ROTAR,3
		GOTO	ROTANDO_5
		GOTO	AHORA_5
;---------------------------------------------------------------

FREC_6

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_6		
		MOVLW	.60		;CARGO W CON EL DECIMAL 5
		MOVWF	RETARDO		;LUEGO LO PASO A RETARDO Y LO DECREMENTO

AHORA_6
		DECF	RETARDO,1	;OPERO RETARDO Y 0X00 CON UN XOR ME DARA 0 SI AMBOS SON CEROS
		MOVF	RETARDO,0	;OSEA SI RETARDO LLEGO A CERO; ENTONCES EL BIT Z SE PONE A 
		XORLW	0X00		;1 PARA INDICAR Q EL RESULTADO DE LA ULÑTIMA OPERACION FUE 0 
		BTFSC	STATUS,Z	;SI RETARDO AUN NO LLEGA A 0 SALTA UNA LINEA
CHAU_6	GOTO	FREC_7		;SI LLEGA A CERO NOS VAMOS A FREC_2

		MOVLW	0X01		;CARGA W CON 00000001
		MOVWF	ROTAR		;LO PASA AL REGISTRO ROTAR
		
ROTANDO_6	
		MOVF	ROTAR,0		;PASA EL CONTENIDO DE ROTAR A W
		MOVWF	PORTB		;DE AHI A PORT B

		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO

		RLF		ROTAR,1		;DEZPLAZA EL CONTENIDO DE ROTAR Y LO GUARDA
		BTFSS	ROTAR,3		;PRUEBA SI SE ACTIVA EL 4to BIT  SI ES ASI SALTA 
		GOTO	ROTANDO_6		;SINO SIGUE ROITANDO
		GOTO	AHORA_6		;REPITE TODO DE NUEVO
							;ESTO SIRVE PARA QUE NO SE ACTIVE EL LED 4to 

;-----------------------------------------------------------------

FREC_7

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_7		
		MOVLW	.70	;CARGO W CON EL DECIMAL 100
		MOVWF	RETARDO		;LUEGO LO PASO A RETARDO Y LO DECREMENTO

AHORA_7
		DECF	RETARDO,1	;OPERO RETARDO Y 0X00 CON UN XOR ME DARA 0 SI AMBOS SON CEROS
		MOVF	RETARDO,0	;OSEA SI RETARDO LLEGO A CERO; ENTONCES EL BIT Z SE PONE A 
		XORLW	0X00		;1 PARA INDICAR Q EL RESULTADO DE LA ULÑTIMA OPERACION FUE 0 
		BTFSC	STATUS,Z	;SI RETARDO AUN NO LLEGA A 0 SALTA HASTA AHORA
CHAU_7	GOTO	FREC_8		;SI LLEGA A CERO NOS VAMOS A FREC_1(NUEVAMENTE)

		MOVLW	0X01		;CARGA W CON 00000001
		MOVWF	ROTAR		;LO PASA AL REGISTRO ROTAR
		
ROTANDO_7	
		MOVF	ROTAR,0		;PASA EL CONTENIDO DE ROTAR A W
		MOVWF	PORTB		;DE AHI A PORT B

		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO

		RLF		ROTAR,1		;DEZPLAZA EL CONTENIDO DE ROTAR Y LO GUARDA
		BTFSS	ROTAR,3		;PRUEBA SI SE ACTIVA EL 4to BIT  SI ES ASI SALTA 
		GOTO	ROTANDO_7		;SINO SIGUE ROITANDO
		GOTO	AHORA_7		;REPITE TODO DE NUEVO
							;ESTO SIRVE PARA QUE NO SE ACTIVE EL LED 4to 

;-----------------------------------------------------------------

FREC_8

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_8		
		MOVLW	.80	;CARGO W CON EL DECIMAL 5
		MOVWF	RETARDO		;LUEGO LO PASO A RETARDO Y LO DECREMENTO

AHORA_8
		DECF	RETARDO,1	;OPERO RETARDO Y 0X00 CON UN XOR ME DARA 0 SI AMBOS SON CEROS
		MOVF	RETARDO,0	;OSEA SI RETARDO LLEGO A CERO; ENTONCES EL BIT Z SE PONE A 
		XORLW	0X00		;1 PARA INDICAR Q EL RESULTADO DE LA ULÑTIMA OPERACION FUE 0 
		BTFSC	STATUS,Z	;SI RETARDO AUN NO LLEGA A 0 SALTA UNA LINEA
CHAU_8	GOTO	FREC_9		;SI LLEGA A CERO NOS VAMOS A FREC_2

		MOVLW	0X01		;CARGA W CON 00000001
		MOVWF	ROTAR		;LO PASA AL REGISTRO ROTAR
		
ROTANDO_8	
		MOVF	ROTAR,0		;PASA EL CONTENIDO DE ROTAR A W
		MOVWF	PORTB		;DE AHI A PORT B

		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO

		RLF		ROTAR,1		;DEZPLAZA EL CONTENIDO DE ROTAR Y LO GUARDA
		BTFSS	ROTAR,3		;PRUEBA SI SE ACTIVA EL 4to BIT  SI ES ASI SALTA 
		GOTO	ROTANDO_8		;SINO SIGUE ROITANDO
		GOTO	AHORA_8		;REPITE TODO DE NUEVO
							;ESTO SIRVE PARA QUE NO SE ACTIVE EL LED 4to 

;-----------------------------------------------------------------

FREC_9

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_9		
		MOVLW	.90		;CARGO W CON EL DECIMAL 100
		MOVWF	RETARDO		;LUEGO LO PASO A RETARDO Y LO DECREMENTO

AHORA_9
		DECF	RETARDO,1	;OPERO RETARDO Y 0X00 CON UN XOR ME DARA 0 SI AMBOS SON CEROS
		MOVF	RETARDO,0	;OSEA SI RETARDO LLEGO A CERO; ENTONCES EL BIT Z SE PONE A 
		XORLW	0X00		;1 PARA INDICAR Q EL RESULTADO DE LA ULÑTIMA OPERACION FUE 0 
		BTFSC	STATUS,Z	;SI RETARDO AUN NO LLEGA A 0 SALTA HASTA AHORA
CHAU_9	GOTO	FREC_10		;SI LLEGA A CERO NOS VAMOS A FREC_1(NUEVAMENTE)

		MOVLW	0X01		;CARGA W CON 00000001
		MOVWF	ROTAR		;LO PASA AL REGISTRO ROTAR
		
ROTANDO_9	
		MOVF	ROTAR,0		;PASA EL CONTENIDO DE ROTAR A W
		MOVWF	PORTB		;DE AHI A PORT B

		CALL	PDelay		;LLAMANDO A RETARDO
		CALL	PDelay		;LLAMANDO A RETARDO

		RLF		ROTAR,1		;DEZPLAZA EL CONTENIDO DE ROTAR Y LO GUARDA
		BTFSS	ROTAR,3		;PRUEBA SI SE ACTIVA EL 4to BIT  SI ES ASI SALTA 
		GOTO	ROTANDO_9		;SINO SIGUE ROITANDO
		GOTO	AHORA_9		;REPITE TODO DE NUEVO
							;ESTO SIRVE PARA QUE NO SE ACTIVE EL LED 4to

;-----------------------------------------------------------------
 
FREC_10

;------REALLIZA LA SECUENCIA DE LEDS-----

CONTROL_10
		MOVLW	.100
		MOVWF	RETARDO

AHORA_10
		DECF	RETARDO,1
		MOVF	RETARDO,0
		XORLW	0X00
		BTFSC	STATUS,Z
CHAU_10	GOTO	FREC_1

		MOVLW	0X01
		MOVWF	ROTAR

ROTANDO_10
		MOVF	ROTAR,0
		MOVWF	PORTB

		CALL    PDelay	

		RLF		ROTAR,1
		BTFSS	ROTAR,3
		GOTO	ROTANDO_10
		GOTO	AHORA_10

;----------------------------------------------------------------
;-----RUTINA DE RETARDO 10mS----------
;-------------------------------------------------------------
; Code generated by PDEL  ver 1.0  on 21/10/2009 at 08:09:32 p.m.
; Description: Waits 10000 cycles
;-------------------------------------------------------------
PDelay  movlw     .8        ; 1 set number of repetitions (B)
        movwf     PDel0     ; 1 |
PLoop1  movlw     .249      ; 1 set number of repetitions (A)
        movwf     PDel1     ; 1 |
PLoop2  clrwdt              ; 1 clear watchdog
        clrwdt              ; 1 cycle delay
        decfsz    PDel1, 1  ; 1 + (1) is the time over? (A)
        goto      PLoop2    ; 2 no, loop
        decfsz    PDel0,  1 ; 1 + (1) is the time over? (B)
        goto      PLoop1    ; 2 no, loop
PDelL1  goto PDelL2         ; 2 cycles delay
PDelL2  clrwdt              ; 1 cycle delay
        return              ; 2+2 Done
;-------------------------------------------------------------


	END 		;FIN